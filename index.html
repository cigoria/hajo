<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hajó típusú emberek</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            height: 100vh;
            background-color: #000;
            color: #fff;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            cursor: none; /* Elrejti az egeret a vetítés alatt */
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .slide.active {
            opacity: 1;
        }

        /* Elhomályosított háttér réteg */
        .slide-bg {
            position: absolute;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            background-size: cover;
            background-position: center;
            filter: blur(35px) brightness(0.5);
            z-index: 1;
        }

        /* A tényleges kép réteg */
        .slide-img {
            position: relative;
            z-index: 2;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        /* Fekvő képeknél teljes kitöltés */
        .slide.landscape .slide-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Vezérlő gombok - csak hoverre látszódnak kicsit */
        .controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .slideshow-container:hover .controls {
            opacity: 0.4;
        }

        .control-btn {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        .progress-indicator {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(0, 0, 0, 0.3);
            color: rgba(255, 255, 255, 0.7);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            z-index: 100;
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>
    <div class="slideshow-container" id="slideshow">

        <div class="progress-indicator">
            <span id="currentTime">--:--</span>
        </div>

        <div class="controls">
            <button class="control-btn" id="prevBtn">‹</button>
            <button class="control-btn" id="pauseBtn">⏸</button>
            <button class="control-btn" id="nextBtn">›</button>
        </div>
    </div>

    <script>
        const config = {
            slideDuration: 5000,
            imageFolder: "Photo/",
            imageCount: 3,
            autoFullscreen: true
        };

        let images = [];
        let currentIndex = 0;
        let slideInterval;
        let isPaused = false;

        const slideshowContainer = document.getElementById('slideshow');
        const currentTimeElement = document.getElementById('currentTime');
        const prevBtn = document.getElementById('prevBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const nextBtn = document.getElementById('nextBtn');

        async function init() {
            // Képlista összeállítása
            for (let i = 0; i < config.imageCount; i++) {
                images.push({ path: `${config.imageFolder}${i}.jpg` });
            }

            createSlideElements();
            await preloadImages();

            if (config.autoFullscreen) {
                // Az automatikus teljes képernyőhöz gyakran felhasználói interakció kell
                document.addEventListener('click', enterFullscreen, { once: true });
            }

            showSlide(currentIndex);
            startSlideshow();
            updateTime();
            setInterval(updateTime, 1000);
        }

        function createSlideElements() {
            for (let i = 0; i < images.length; i++) {
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.id = `slide-${i}`;

                const bg = document.createElement('div');
                bg.className = 'slide-bg';
                bg.style.backgroundImage = `url('${images[i].path}')`;

                const img = document.createElement('img');
                img.className = 'slide-img';
                img.src = images[i].path;

                slide.appendChild(bg);
                slide.appendChild(img);
                slideshowContainer.appendChild(slide);
            }
        }

        async function preloadImages() {
            const loadPromises = images.map((image, i) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => {
                        const orientation = img.width < img.height ? "portrait" : "landscape";
                        document.getElementById(`slide-${i}`).classList.add(orientation);
                        resolve();
                    };
                    img.onerror = () => {
                        document.getElementById(`slide-${i}`).classList.add("landscape");
                        resolve();
                    };
                    img.src = image.path;
                });
            });
            await Promise.all(loadPromises);
        }

        function showSlide(index) {
            const slides = document.querySelectorAll('.slide');
            slides.forEach(s => s.classList.remove('active'));

            currentIndex = (index + images.length) % images.length;
            document.getElementById(`slide-${currentIndex}`).classList.add('active');
        }

        function nextSlide() { showSlide(currentIndex + 1); }
        function prevSlide() { showSlide(currentIndex - 1); }

        function startSlideshow() {
            if (slideInterval) clearInterval(slideInterval);
            slideInterval = setInterval(() => {
                if (!isPaused) nextSlide();
            }, config.slideDuration);
        }

        function toggleSlideshow() {
            isPaused = !isPaused;
            pauseBtn.textContent = isPaused ? "▶" : "⏸";
        }

        function enterFullscreen() {
            if (!document.fullscreenElement) {
                const el = document.documentElement;
                if (el.requestFullscreen) el.requestFullscreen();
            }
        }

        function updateTime() {
            const now = new Date();
            currentTimeElement.textContent = now.getHours().toString().padStart(2, '0') + ":" +
                                           now.getMinutes().toString().padStart(2, '0');
        }

        // Vezérlés
        prevBtn.addEventListener('click', (e) => { e.stopPropagation(); prevSlide(); });
        nextBtn.addEventListener('click', (e) => { e.stopPropagation(); nextSlide(); });
        pauseBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleSlideshow(); });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') prevSlide();
            if (e.key === 'ArrowRight') nextSlide();
            if (e.key === ' ') toggleSlideshow();
            if (e.key === 'f' || e.key === 'F') enterFullscreen();
        });

        // Kattintásra tovább lép
        slideshowContainer.addEventListener('click', nextSlide);

        init();
    </script>
</body>
</html>
